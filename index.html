<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>30 Day Ramadan Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; color: #f8fafc; font-family: 'Inter', sans-serif; }
        .card { background: #1e293b; border-radius: 15px; padding: 20px; margin-bottom: 20px; }
        .accent-gold { color: #fbbf24; }
        .checkbox-custom { width: 24px; height: 24px; accent-color: #fbbf24; cursor: pointer; }
        select { background: #334155; color: white; border: 1px solid #475569; padding: 5px 10px; border-radius: 8px; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-md mx-auto">
        <header class="text-center mb-6">
            <h1 class="text-3xl font-bold accent-gold">Ramadan Tracker</h1>
            <div class="mt-4 flex flex-col gap-3 items-center">
                <div class="flex gap-2">
                    <button onclick="switchUser('HASIN')" id="btn-HASIN" class="px-5 py-1 rounded-full font-bold bg-amber-500 text-white">HASIN</button>
                    <button onclick="switchUser('NAJA')" id="btn-NAJA" class="px-5 py-1 rounded-full font-bold bg-slate-700 text-slate-300">NAJA</button>
                </div>
                <div class="flex items-center gap-2">
                    <span class="text-sm">Select Day:</span>
                    <select id="day-select" onchange="loadData()">
                        </select>
                </div>
            </div>
        </header>

        <div id="main-content">
            <section class="card">
                <h2 class="text-xl font-semibold mb-4 border-b border-slate-700 pb-2 flex justify-between">
                    Swala <span id="progress-text" class="text-sm font-normal text-amber-400">0%</span>
                </h2>
                <div class="grid grid-cols-1 gap-4" id="swala-list"></div>
            </section>

            <section class="card">
                <h2 class="text-xl font-semibold mb-4 border-b border-slate-700 pb-2">Quran</h2>
                <label class="block text-sm mb-2 text-slate-400">Juz' or Pages completed:</label>
                <input type="text" id="quran-input" placeholder="e.g. Juz 1, Page 20" oninput="saveData()" 
                       class="w-full bg-slate-900 border border-slate-700 rounded p-3 focus:outline-none focus:border-amber-500 text-white">
            </section>

            <section class="card">
                <h2 class="text-xl font-semibold mb-4 border-b border-slate-700 pb-2 text-slate-200">Daily Duas</h2>
                <div class="flex items-center justify-between">
                    <span class="text-slate-300">Read Daily Duas?</span>
                    <input type="checkbox" id="dua-check" onchange="saveData()" class="checkbox-custom">
                </div>
            </section>
        </div>
    </div>

    <script>
        let currentUser = 'HASIN';
        const prayers = ['Tahajjud', 'Subh', 'Luhr', 'Asar', 'Maghrib', 'Isha', 'Tharaveeh'];

        // Generate Day 1 to 30 in the dropdown
        function setupDaySelector() {
            const select = document.getElementById('day-select');
            for (let i = 1; i <= 30; i++) {
                const opt = document.createElement('option');
                opt.value = i;
                opt.innerHTML = `Day ${i}`;
                select.appendChild(opt);
            }
        }

        function init() {
            setupDaySelector();
            const list = document.getElementById('swala-list');
            list.innerHTML = prayers.map(p => `
                <div class="flex justify-between items-center bg-slate-800/50 p-3 rounded-lg">
                    <label for="${p}" class="font-medium text-slate-200">${p}</label>
                    <input type="checkbox" id="${p}" onchange="saveData()" class="checkbox-custom">
                </div>
            `).join('');
            loadData();
        }

        function switchUser(user) {
            currentUser = user;
            document.getElementById('btn-HASIN').className = user === 'HASIN' ? 'px-5 py-1 rounded-full font-bold bg-amber-500 text-white' : 'px-5 py-1 rounded-full font-bold bg-slate-700 text-slate-300';
            document.getElementById('btn-NAJA').className = user === 'NAJA' ? 'px-5 py-1 rounded-full font-bold bg-amber-500 text-white' : 'px-5 py-1 rounded-full font-bold bg-slate-700 text-slate-300';
            loadData();
        }

        function saveData() {
            const day = document.getElementById('day-select').value;
            const data = {
                quran: document.getElementById('quran-input').value,
                dua: document.getElementById('dua-check').checked,
                prayers: {}
            };
            prayers.forEach(p => {
                data.prayers[p] = document.getElementById(p).checked;
            });

            // Store with a key that includes the User AND the Day
            localStorage.setItem(`ramadan_${currentUser}_day${day}`, JSON.stringify(data));
            updateProgress();
        }

        function loadData() {
            const day = document.getElementById('day-select').value;
            const saved = localStorage.getItem(`ramadan_${currentUser}_day${day}`);
            
            // Clear current view first
            document.getElementById('quran-input').value = '';
            document.getElementById('dua-check').checked = false;
            prayers.forEach(p => document.getElementById(p).checked = false);

            if (saved) {
                const data = JSON.parse(saved);
                document.getElementById('quran-input').value = data.quran || '';
                document.getElementById('dua-check').checked = data.dua || false;
                prayers.forEach(p => {
                    if (data.prayers && data.prayers[p]) {
                        document.getElementById(p).checked = data.prayers[p];
                    }
                });
            }
            updateProgress();
        }

        function updateProgress() {
            const checked = prayers.filter(p => document.getElementById(p).checked).length;
            const percent = Math.round((checked / prayers.length) * 100);
            document.getElementById('progress-text').innerText = `${percent}% Done`;
        }

        init();
    </script>
</body>
</html>
            `).join('');
            loadData();
        }

        function switchUser(user) {
            currentUser = user;
            document.getElementById('btn-HASIN').className = user === 'HASIN' ? 'px-6 py-2 rounded-full font-bold bg-amber-500 text-white' : 'px-6 py-2 rounded-full font-bold bg-slate-700 text-slate-300';
            document.getElementById('btn-NAJA').className = user === 'NAJA' ? 'px-6 py-2 rounded-full font-bold bg-amber-500 text-white' : 'px-6 py-2 rounded-full font-bold bg-slate-700 text-slate-300';
            loadData();
        }

        function saveData() {
            const data = {
                quran: document.getElementById('quran-input').value,
                dua: document.getElementById('dua-check').checked,
                prayers: {}
            };
            prayers.forEach(p => {
                data.prayers[p] = document.getElementById(p).checked;
            });
            localStorage.setItem(`ramadan_${currentUser}`, JSON.stringify(data));
        }

        function loadData() {
            const saved = localStorage.getItem(`ramadan_${currentUser}`);
            if (saved) {
                const data = JSON.parse(saved);
                document.getElementById('quran-input').value = data.quran || '';
                document.getElementById('dua-check').checked = data.dua || false;
                prayers.forEach(p => {
                    document.getElementById(p).checked = data.prayers[p] || false;
                });
            } else {
                // Reset form for new user if no data
                document.getElementById('quran-input').value = '';
                document.getElementById('dua-check').checked = false;
                prayers.forEach(p => document.getElementById(p).checked = false);
            }
        }

        init();
    </script>
</body>
</html>
